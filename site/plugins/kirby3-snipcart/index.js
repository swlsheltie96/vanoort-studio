(function () {function q(a){return a&&a.__esModule?{d:a.default}:{d:a}}var o={},n=function(t){var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,i=Object.create(o.prototype),a=new j(n||[]);return i._invoke=function(t,r,e){var n=f;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return G()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===f)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=h(t,r,e);if("normal"===u.type){if(n=e.done?p:s,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var f="suspendedStart",s="suspendedYield",l="executing",p="completed",y={};function v(){}function d(){}function g(){}var m={};m[i]=function(){return this};var w=Object.getPrototypeOf,L=w&&w(w(k([])));L&&L!==e&&n.call(L,i)&&(m=L);var x=g.prototype=v.prototype=Object.create(m);function E(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function b(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==typeof s&&n.call(s,"__await")?r.resolve(s.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(s).then(function(t){f.value=t,a(f)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function $(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:G}}function G(){return{value:r,done:!0}}return d.prototype=x.constructor=g,g.constructor=d,g[c]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(x),x[c]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}},t}(o);try{regeneratorRuntime=n}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(n)}var c={props:{initialTab:String,tabs:Array},data:function(){return{activeTab:this.initialTab}},computed:{tabPanelSlotName:function(){return"tab-panel-".concat(this.activeTab)}},methods:{tabHeadSlotName:function(t){return"tab-head-".concat(t)},switchTab:function(t){this.activeTab=t}}};if(typeof c==="function"){c=c.options}Object.assign(c,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"card"},[_c("header",{staticClass:"card-header"},[_c("ul",{staticClass:"tab-heads"},_vm._l(_vm.tabs,function(tab){return _c("li",{key:tab,staticClass:"tab-head",class:{"tab-head--active":_vm.activeTab===tab},on:{"click":function($event){return _vm.switchTab(tab)}}},[_vm._t(_vm.tabHeadSlotName(tab),[_vm._v(_vm._s(tab)+" ")])],2)}),0)]),_vm._v(" "),_c("main",{staticClass:"card-body"},[_c("div",{staticClass:"tab-panel"},[_vm._t(_vm.tabPanelSlotName)],2)])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var d={data:function(){return{abandoned:null}},computed:{abandonedCount:function(){return this.abandoned?this.abandoned.length:"Loading..."}},created:function(){var e;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$api.get("snipcart/carts/abandoned"));case 2:e=n.sent,this.abandoned=e.items;case 4:case"end":return n.stop();}},null,this)}};if(typeof d==="function"){d=d.options}Object.assign(d,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"k-snipcart-vital"},[_c("h3",[_vm._v("Abandonded Carts")]),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.abandonedCount))])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var e={data:function(){return{totalSales:null}},computed:{salesCount:function(){return this.totalSales?this.totalSales:"Loading..."}},created:function(){var t,e;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$api.get("snipcart/orders"));case 2:t=r.sent,e=t.items.reduce(function(t,e){return t+e.finalGrandTotal},0).toFixed(2),this.totalSales=e;case 5:case"end":return r.stop();}},null,this)}};if(typeof e==="function"){e=e.options}Object.assign(e,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"k-snipcart-vital"},[_c("h3",[_vm._v("Total Sales")]),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.salesCount))])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var f={name:"popularItem",data:function(){return{popularItem:void 0,errors:[]}},computed:{popularCount:function(){return this.popularItem?this.popularItem:"Loading..."}},created:function(){var e,t,r,n;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,regeneratorRuntime.awrap(this.$api.get("snipcart/orders",{pretty:!0}));case 3:e=u.sent,t=e.items.reduce(function(e,t){return e.concat(t.items)},[]),r=t.map(function(e){return e.name}).reduce(function(e,t){var r=e[t]||0;return e[t]=r+1,e},{}),n=Object.keys(r).reduce(function(e,t){return r[e]>r[t]?e:t}),this.popularItem=n,u.next=13;break;case 10:u.prev=10,u.t0=u.catch(0),this.errors.push(u.t0);case 13:case"end":return u.stop();}},null,this,[[0,10]])}};if(typeof f==="function"){f=f.options}Object.assign(f,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"k-snipcart-vital"},[_c("h3",[_vm._v("Most Popular")]),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.popularCount))])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var l,k={};!function(t,e){"object"==typeof k?k=e():"function"==typeof l&&l.amd?l(e):(t=t||self).Tbl=e()}(k,function(){return function(t,e,n,s,i,r,o,a,c,l){"boolean"!=typeof o&&(a,a=o,o=!1);var d,f="function"==typeof n?n.options:n;if(t&&t.render&&(f.render=t.render,f.staticRenderFns=t.staticRenderFns,f._compiled=!0),d)if(f.functional){var u=f.render;f.render=function(t,e){return d.call(e),u(t,e)}}else{var h=f.beforeCreate;f.beforeCreate=h?[].concat(h,d):[d]}return n}({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"tbl",attrs:{"data-version":"1.2.0"}},[n("header",{staticClass:"k-section-header"},[t._t("headline",[n("k-headline",[t._v(t._s(t.headline))])]),t._v(" "),t._t("filter",[n("k-button-group",[t.showReset?n("button",{staticClass:"tbl-reset",on:{click:t.reset}},[t._v("\n            "+t._s(t.config.labels.reset)+"\n          ")]):t._e(),t._v(" "),t.showSearch?n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"search",staticClass:"tbl-search",attrs:{type:"text",placeholder:t.config.labels.filter},domProps:{value:t.searchTerm},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.reset(e)},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}):t._e(),t._v(" "),t.showAdd?n("k-button",{attrs:{icon:"add"},on:{click:function(e){return t.$emit("add")}}},[t._v("\n            "+t._s(t.$t("add"))+"\n          ")]):t._e()],1)])],2),t._v(" "),t._t("table",[n("table",[n("thead",[0===t.rowsFiltered.length?n("th",{attrs:{colspan:t.widthLoading}}):[t._l(t.columns,function(e){return n("th",{key:e.field,class:"head-"+(e.class||"field-"+e.field),attrs:{"data-align":t.getAlign(e),"data-width":e.width,"data-responsive":!1!==e.responsive,"data-sortable":t.config.sort.enabled&&!1!==e.sort,"data-sorted":t.sortBy===e&&(1===t.sortOrder?"asc":"desc")},on:{click:function(n){return t.setSort(e)}}},[t._v("\n              "+t._s(e.label)+"\n            ")])}),t._v(" "),t.showActions?n("th",{attrs:{"data-width":t.widthActions}}):t._e()]],2),t._v(" "),n("tbody",[0===t.rowsFiltered.length?n("tr",[n("td",{attrs:{colspan:t.widthLoading,"data-align":"center"}},[t._t("empty-row",[n("p",[this.isLoading?n("k-icon",{attrs:{type:"loader"}}):n("span",[t._v(t._s(t.config.labels.empty))])],1)])],2)]):t._l(t.rowsPaginated,function(e,s){return n("tr",{key:"row_"+s},[t._l(t.columns,function(i){return n("td",{key:i.field,class:"row-"+(i.class||"field-"+i.field),attrs:{"data-width":i.width,"data-align":t.getAlign(i),"data-responsive":!1!==i.responsive},on:{click:function(n){return t.$emit("action",[t.config.actions.onRow,e,i.field])}}},[t._t("column-"+(i.name||i.field),[t._t("column-$default",["url"===i.type?n("k-url-field-preview",{attrs:{value:e[i.field]}}):n("p",{domProps:{innerHTML:t._s(t.getValue(e[i.field],i.type))}})],{index:s,column:i,field:i.field,row:e,value:t.getValue(e[i.field],i.type)})],{index:s,column:i,field:i.field,row:e,value:t.getValue(e[i.field],i.type)})],2)}),t._v(" "),t.showActions?n("td",{staticClass:"tbl-options",attrs:{"data-width":t.widthActions,"data-align":"center"}},[t._t("column-$actions",[t.config.actions.inline?t._l(t.config.actions.items,function(s){return n("k-button",{key:s.click,attrs:{tooltip:s.text,icon:s.icon},on:{click:function(n){return n.stopPropagation(),t.$emit("action",[s.click,e])}}})}):[n("k-button",{attrs:{tooltip:t.$t("options"),icon:"dots"},on:{click:function(e){e.stopPropagation(),t.$refs["options-"+s][0].toggle()}}}),t._v(" "),n("k-dropdown-content",{ref:"options-"+s,refInFor:!0,attrs:{options:t.config.actions.items,align:"right"},on:{action:function(n){return t.$emit("action",[n,e])}}})]],{row:e,index:s})],2):t._e()],2)})],2)])]),t._v(" "),n("footer",{staticClass:"tbl-footer"},[t._t("footer",[t.rowsFiltered.length>0?[n("div",{staticClass:"tbl-perPage"},[t._t("footer-before-perPage"),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.perPage,expression:"perPage"}],attrs:{autocomplete:"off"},on:{input:t.onPerPage,change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.perPage=e.target.multiple?n:n[0]}}},[t._l(t.config.pagination.perPageOptions,function(e){return n("option",{key:e,domProps:{value:e,textContent:t._s(e)}})}),t._v(" "),n("option",{domProps:{value:9999999}},[t._v("\n                "+t._s(t.config.labels.all)+"\n              ")])],2),t._v(" "),n("span",[t._v(t._s(t.config.labels.perPage))]),t._v(" "),t._t("footer-after-perPage")],2),t._v(" "),t._t("footer-center"),t._v(" "),n("div",{staticClass:"tbl-navigation"},[t._t("footer-before-pagination"),t._v(" "),t.rowsFiltered.length>t.perPage?[n("div",{staticClass:"btn btn-prev",attrs:{"data-disabled":t.page<=1},on:{click:function(e){return t.navigate(-1)}}},[n("span",{staticClass:"chevron"}),t._v(" "),n("span",[t._v(t._s(t.$t("prev")))])]),t._v(" "),n("div",{staticClass:"info"},[t._v("\n                "+t._s(this.pageRowFirst)+" - "+t._s(Math.min(this.pageRowLast,this.rowsFiltered.length))+" of "+t._s(this.rowsFiltered.length)+"\n              ")]),t._v(" "),n("div",{staticClass:"btn btn-next",attrs:{"data-disabled":t.page*t.perPage>=t.rowsFiltered.length},on:{click:function(e){return t.navigate(1)}}},[n("span",[t._v(t._s(t.$t("next")))]),t._v(" "),n("span",{staticClass:"chevron"})])]:t._e(),t._v(" "),t._t("footer-after-pagination")],2)]:t._e()])],2)],2),t._v(" "),t._t("dialogs")],2)},staticRenderFns:[]},0,{props:{headline:String,columns:Array,rows:Array,options:Object,actions:Object,labels:Object,pagination:{type:[Boolean,Object],default:!0},search:{type:[Boolean,Object],default:!0},sort:{type:[Boolean,Object],default:!0},store:{type:[Boolean,Object],default:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{searchTerm:"",sortBy:null,sortOrder:1,page:null,perPage:null}},computed:{configActions:function(){return Object.assign({inline:!1,items:[],onRow:!1},this.actions)},configLabels:function(){return Object.assign({all:"All",empty:"No rows available",perPage:"rows displayed",reset:"Reset",filter:"Filter items..."},this.labels)},configPagination:function(){return Object.assign({enabled:!0,page:1,perPage:10,perPageOptions:[5,10,25,50,100]},this.resolveOptions(this.pagination))},configSearch:function(){return Object.assign({enabled:!0},this.resolveOptions(this.search))},configSort:function(){return Object.assign({enabled:!0,initialBy:null},this.resolveOptions(this.sort))},configStore:function(){return Object.assign({enabled:!1,name:""},this.resolveOptions(this.store))},config:function(){return Object.assign({actions:this.configActions,labels:this.configLabels,pagination:this.configPagination,search:this.configSearch,sort:this.configSort,store:this.configStore,add:!1,reset:!0},this.options)},pageOffset:function(){return(this.page-1)*this.perPage},pageRowFirst:function(){return this.pageOffset+1},pageRowLast:function(){return this.pageOffset+this.perPage},rowsFiltered:function(){var t=this;if(""===this.searchTerm)return this.rows;var e=this.searchTerm.toLowerCase();return this.rows.slice().filter(function(n){var s=!1;return Object.keys(n).forEach(function(i){var r=t.columns.find(function(t){return t.field===i});r&&!1!==r.search&&String(n[i]).toLowerCase().includes(e)&&(s=!0)}),s})},rowsPaginated:function(){return this.rowsSorted.slice(this.pageOffset,this.pageOffset+this.perPage)},rowsSorted:function(){var t=this;return this.sortBy&&!1!==this.config.sort.enabled?this.rowsFiltered.slice().sort(function(e,n){if(t.sortBy.field&&(e=e[t.sortBy.field],n=n[t.sortBy.field]),t.sortBy.sort&&t.sortBy.sort.field&&(e=e[t.sortBy.sort.field],n=n[t.sortBy.sort.field]),t.sortBy.sort&&t.sortBy.sort.value&&(e=e[t.sortBy.sort.value],n=n[t.sortBy.sort.value]),t.sortBy.callback)return t.sortBy.callback(e,n,t.sortOrder,t.sortBy);switch(t.sortBy.type){case"number":return(e-n)*t.sortOrder;case"date":return(new Date(e)-new Date(n))*t.sortOrder;default:return e=(""+e).toLowerCase(),n=(""+n).toLowerCase(),e.localeCompare(n)*t.sortOrder;}}):this.rowsFiltered},showActions:function(){return!!this.$scopedSlots["column-$actions"]||!!this.config.actions.items&&this.config.actions.items.length>0},showAdd:function(){return this.config.add},showReset:function(){return this.config.reset&&(""!==this.searchTerm||null!==this.sortBy)},showSearch:function(){return this.columns.filter(function(t){return!1!==t.search}).length>0&&this.config.search.enabled},storeName:function(){return"kirby$plugin$tbl$"+this.config.store.name},widthActions:function(){return this.config.actions.width?this.config.actions.width:(this.config.actions.inline?this.config.actions.items.length:1)+"fr"},widthLoading:function(){return Math.max(this.columns.length,1)+(this.showActions?1:0)}},watch:{config:function(){this.load()},searchTerm:function(t){this.setStore(),this.page=1,this.$emit("onFilter",t)}},created:function(){this.load()},methods:{getAlign:function(t){if(t.align)return t.align;switch(t.type){case"number":case"decimal":case"percentage":case"boolean":case"date":return"right";default:return"left";}},getValue:function(t,e){switch(e){case"date":return t?new Date(t).toLocaleString(this.$user.language.replace("_","-"),{year:"numeric",month:"long",day:"numeric"}):"\u2013";case"number":return t?1*t:"\u2013";case"decimals":return t?Number(t).toFixed(2):"\u2013";case"percentage":return t?Number(100*t).toFixed(2)+" %":"\u2013 %";default:return t||null;}},load:function(){this.page=this.config.pagination.page,this.perPage=this.config.pagination.perPage,this.loadStore(),this.loadSort()},loadSort:function(){if(!0===this.config.sort.enabled&&null===this.sortBy){var t=this.config.sort.initialBy;if(t){var e=this.columns.find(function(e){return e.name===t});e||(e=this.columns.find(function(e){return e.field===t})),this.setSort(e)}}},loadStore:function(){if(!0===this.config.store.enabled){var t=JSON.parse(sessionStorage.getItem(this.storeName));null!==t&&(this.page=t.page,this.perPage=t.perPage,this.searchTerm=t.searchTerm,this.sortBy=t.sortBy,this.sortOrder=t.sortOrder)}},navigate:function(t){this.page+=t,this.setStore(),this.$emit("onPage",this.page)},onPerPage:function(){this.page=1,this.setStore(),this.$emit("onPerPage",this.perPage)},reset:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.$refs.search.blur(),this.setStore(),this.$emit("onReset")},resolveOptions:function(t){return!0===t||!1===t?{enabled:t}:Object.assign({enabled:!0},t)},setSort:function(t){!1!==this.config.sort.enabled&&!1!==t.sort&&(this.sortBy===t?this.sortOrder*=-1:(this.sortBy=t,this.sortOrder="desc"===(t.sort&&t.sort.order?t.sort.order:t.sort)?-1:1),this.setStore(),this.$emit("onSort",Object.assign({},t,{currentDirection:this.sortOrder})))},setStore:function(){var t=this;!0===this.config.store.enabled&&this.$nextTick(function(){var e={page:t.page,perPage:t.perPage,searchTerm:t.searchTerm,sortBy:t.sortBy,sortOrder:t.sortOrder};sessionStorage.setItem(t.storeName,JSON.stringify(e))})}}},0,0,0,void 0,void 0)});var m=q(k);var i={components:{Tbl:m.d},data:function(){return{orders:[]}},computed:{columns:function(){return[{name:"id",label:"#",field:"invoiceNumber",sort:!0,search:!0,align:"left",width:"id"},{name:"date",label:"Order Date",field:"creationDate",type:"date",align:"left",width:"date"},{name:"status",label:"Status",field:"status",sort:!1,search:!1,align:"center",width:"status"},{name:"total",label:"Total",field:"finalGrandTotal",type:"decimal",sort:!0,search:!1,width:"total"},{name:"address",label:"Ship to",field:"shippingAddressCountry",align:"right",width:"ship"}]},config:function(){return{}}},created:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$api.get("snipcart/orders"));case 2:e=t.sent,this.orders=e.items;case 4:case"end":return t.stop();}},null,this)}};if(typeof i==="function"){i=i.options}Object.assign(i,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("tbl",_vm._b({attrs:{"headline":"Orders","columns":_vm.columns,"rows":_vm.orders,"is-loading":this.$store.state.isLoading}},"tbl",_vm.config,false))};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var j={name:"Vitals",components:{abandoned:d,"sales-total":e,popular:f,orders:i}};if(typeof j==="function"){j=j.options}Object.assign(j,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_c("k-header",[_vm._v("Dashboard")]),_vm._v(" "),_c("k-grid",{staticClass:"k-snipcart-vitals",attrs:{"gutter":"medium"}},[_c("k-column",{attrs:{"width":"1/3"}},[_c("sales-total")],1),_vm._v(" "),_c("k-column",{attrs:{"width":"1/3"}},[_c("popular")],1),_vm._v(" "),_c("k-column",{attrs:{"width":"1/3"}},[_c("abandoned")],1),_vm._v(" "),_c("k-column",{attrs:{"width":"1/1"}},[_c("orders")],1)],1)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var h={components:{Tbl:m.d},data:function(){return{discounts:[]}},computed:{columns:function(){return[{name:"discname",label:"Discount Name",field:"name",sort:!0,search:!0,align:"left",width:"name"},{name:"code",label:"Code",field:"code",sort:!0,search:!0,align:"left",width:"code"},{name:"expires",label:"Expires",field:"expires",sort:!0,search:!0,align:"left",width:"expires"},{name:"uses",label:"# Uses",field:"numberOfUsages",sort:!0,search:!0,align:"left",width:"uses"}]},config:function(){return{}}},created:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$api.get("snipcart/discounts"));case 2:e=t.sent,this.discounts=e,console.log(e);case 5:case"end":return t.stop();}},null,this)}};if(typeof h==="function"){h=h.options}Object.assign(h,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("tbl",_vm._b({attrs:{"headline":"Active Discount Codes","columns":_vm.columns,"rows":_vm.discounts,"is-loading":this.$store.state.isLoading}},"tbl",_vm.config,false))};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var g={name:"Discounts",components:{discounts:h}};if(typeof g==="function"){g=g.options}Object.assign(g,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_c("k-header",[_vm._v("Discounts")]),_vm._v(" "),_c("k-grid",{staticClass:"k-snipcart-vitals",attrs:{"gutter":"medium"}},[_c("k-column",{attrs:{"width":"1/1"}},[_c("discounts")],1)],1)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var b={name:"Dashboard",components:{vitals:j,discounts:g,TabCard:c},data:function(){return{initialTab:"dashboard",tabs:["dashboard","discounts"]}}};if(typeof b==="function"){b=b.options}Object.assign(b,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("k-view",{staticClass:"k-snipcart-view"},[_c("TabCard",{attrs:{"tabs":_vm.tabs,"initialTab":_vm.initialTab}},[_c("template",{slot:"tab-head-dashboard"},[_vm._v(" Dashboard ")]),_vm._v(" "),_c("template",{slot:"tab-panel-dashboard"},[_c("vitals")],1),_vm._v(" "),_c("template",{slot:"tab-head-discounts"},[_vm._v(" Discounts ")]),_vm._v(" "),_c("template",{slot:"tab-panel-discounts"},[_c("discounts")],1)],2)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a={props:p({label:String,value:String,disabled:Boolean,required:Boolean},"value",String),data:function(){return{totalSales:null,productID:this.$store.getters["content/values"]().productid}},computed:{salesCount:function(){return this.totalSales?this.totalSales:"Loading..."}},created:function(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$api.get("snipcart/products/"+this.productID));case 2:void 0===(t=e.sent)||0==t.length?this.totalSales=0:this.totalSales=t.statistics.totalSales.toFixed(2);case 4:case"end":return e.stop();}},null,this)}};if(typeof a==="function"){a=a.options}Object.assign(a,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",{staticClass:"k-snipcart-product-total"},[_c("div",{staticClass:"k-snipcart-vital"},[_c("h3",[_vm._v("Total Sales")]),_vm._v(" "),_c("span",[_vm._v(_vm._s(_vm.salesCount))])])])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("hashandsalt/kirby-snipcart",{fields:{productTotal:a},views:{snipcartproducts:{component:b,icon:"cart",label:"Snipcart"}}});})();